<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Campus Connect - HIT Marketplace</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/flowbite/1.6.5/flowbite.min.css" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/flowbite/1.6.5/flowbite.min.js"></script>
    
    
</head>
<body>
    <div id="app" class="min-h-screen flex flex-col">
        <!-- Navigation -->
        <nav class="hit-primary-bg border-gray-200 px-4 lg:px-6 py-3">
            <div class="flex flex-wrap justify-between items-center mx-auto max-w-screen-xl">
                <a href="#" class="flex items-center" @click="showPage('home')">
                    <span class="self-center text-xl font-semibold whitespace-nowrap text-white">Campus Connect</span>
                </a>
                <div class="flex items-center lg:order-2">
                    <button v-if="!isLoggedIn" @click="showPage('login')" class="text-white bg-primary-700 hover:bg-primary-800 focus:ring-4 focus:ring-primary-300 font-medium rounded-lg text-sm px-4 lg:px-5 py-2 lg:py-2.5 mr-2 focus:outline-none">
                        Log in
                    </button>
                    <button v-if="isLoggedIn" @click="logout" class="text-white hover:bg-red-700 focus:ring-4 focus:ring-primary-300 font-medium rounded-lg text-sm px-4 lg:px-5 py-2 lg:py-2.5 mr-2 focus:outline-none bg-red-600">
                        Log out
                    </button>
                    <button v-if="isLoggedIn" @click="showPage('new-listing')" class="text-white bg-hit-secondary hover:bg-yellow-500 focus:ring-4 focus:ring-yellow-300 font-medium rounded-lg text-sm px-4 lg:px-5 py-2 lg:py-2.5 mr-2 focus:outline-none text-gray-900">
                        + New Listing
                    </button>
                    <button @click="toggleMobileMenu" class="inline-flex items-center p-2 ml-1 text-sm text-white rounded-lg lg:hidden hover:bg-green-800 focus:outline-none focus:ring-2 focus:ring-gray-200">
                        <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                            <path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path>
                        </svg>
                        <svg class="hidden w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                            <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                        </svg>
                    </button>
                </div>
                <div :class="{'hidden': !mobileMenuOpen}" class="justify-between items-center w-full lg:flex lg:w-auto lg:order-1" id="mobile-menu-2">
                    <ul class="flex flex-col mt-4 font-medium lg:flex-row lg:space-x-8 lg:mt-0">
                        <li>
                            <a @click="showPage('home')" href="#" class="block py-2 pr-4 pl-3 text-white rounded bg-primary-700 lg:bg-transparent lg:p-0" aria-current="page">Home</a>
                        </li>
                        <li>
                            <a @click="showPage('home'); filterByCategory('Textbooks')" href="#" class="block py-2 pr-4 pl-3 text-white border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-primary-700 lg:p-0">Textbooks</a>
                        </li>
                        <li>
                            <a @click="showPage('home'); filterByCategory('Electronics')" href="#" class="block py-2 pr-4 pl-3 text-white border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-primary-700 lg:p-0">Electronics</a>
                        </li>
                        <li>
                            <a @click="showPage('home'); filterByCategory('Services')" href="#" class="block py-2 pr-4 pl-3 text-white border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-primary-700 lg:p-0">Services</a>
                        </li>
                        <li>
                            <a @click="showPage('home'); filterByCategory('Other')" href="#" class="block py-2 pr-4 pl-3 text-white border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-primary-700 lg:p-0">Other</a>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="flex-grow">
            <!-- Home Page (Listings) -->
            <div v-if="currentPage === 'home'" class="container mx-auto px-4 py-8">
                <div class="flex flex-col md:flex-row justify-between items-center mb-6">
                    <h1 class="text-2xl font-bold mb-4 md:mb-0">HIT Campus Connect</h1>
                    <div class="w-full md:w-1/3">
                        <div class="relative">
                            <div class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none">
                                <svg class="w-4 h-4 text-gray-500 dark:text-gray-400" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20">
                                    <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z"/>
                                </svg>
                            </div>
                            <input type="search" v-model="searchQuery" @input="searchListings" class="block w-full p-4 pl-10 text-sm form-input-dark border border-dark rounded-lg" placeholder="Search listings...">
                        </div>
                    </div>
                </div>

                <div v-if="isLoggedIn" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
                    <div v-for="(listing, index) in filteredListings" :key="index" class="border border-dark rounded-lg overflow-hidden shadow-lg card-dark listing-transition">
                        <div class="h-48 bg-gray-300 relative">
                            <div class="absolute h-full w-full flex items-center justify-center" :style="{ backgroundColor: getRandomColor(listing.title) }">
                                <span class="text-3xl text-white">{{ getInitials(listing.title) }}</span>
                            </div>
                        </div>
                        <div class="p-4">
                            <div class="flex justify-between items-start">
                                <h3 class="text-lg font-bold mb-1">{{ listing.title }}</h3>
                                <span class="text-sm font-semibold hit-secondary-text">${{ listing.price }}</span>
                            </div>
                            <span class="inline-block px-2 py-1 text-xs rounded-full mb-2" :class="getCategoryClass(listing.category)">
                                {{ listing.category }}
                            </span>
                            <p class="text-sm mb-2">{{ truncateDescription(listing.description) }}</p>
                            <div class="flex justify-between items-center mt-3">
                                <span class="text-xs opacity-75">{{ listing.sellerName }}</span>
                                <button @click="contactSeller(listing)" class="text-sm px-3 py-1 rounded bg-primary-color text-white hover:bg-opacity-90 transition">Contact</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div v-else class="p-6 border border-dark rounded-lg card-dark text-center">
                    <h2 class="text-xl font-bold mb-4">Login Required</h2>
                    <p class="mb-4">Please log in to view and interact with the HIT Campus Connect marketplace.</p>
                    <div class="login-required mt-6">
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                            <div v-for="i in 6" :key="i" class="border border-dark rounded-lg overflow-hidden shadow-lg card-dark">
                                <div class="h-48 bg-gray-300"></div>
                                <div class="p-4">
                                    <div class="h-6 bg-gray-300 rounded mb-2 w-3/4"></div>
                                    <div class="h-4 bg-gray-300 rounded mb-2 w-1/4"></div>
                                    <div class="h-4 bg-gray-300 rounded mb-2"></div>
                                    <div class="h-4 bg-gray-300 rounded mb-2 w-5/6"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <button @click="showPage('login')" class="mt-6 px-6 py-2 bg-primary-color text-white rounded-lg hover:bg-opacity-90 transition">
                        Login Now
                    </button>
                </div>
            </div>

            <!-- Login Page -->
            <div v-if="currentPage === 'login'" class="container mx-auto px-4 py-8 flex justify-center">
                <div class="w-full max-w-md p-6 auth-form rounded-lg shadow-md border">
                    <h2 class="text-2xl font-bold mb-6 text-center">Campus Connect Login</h2>
                    <p class="mb-6 text-center">For Harare Institute of Technology Students & Lecturers</p>
                    
                    <div class="mb-4">
                        <label class="block mb-2 text-sm font-medium">Email Address</label>
                        <input type="email" v-model="loginForm.email" class="form-input-dark border border-dark text-base rounded-lg block w-full p-2.5" placeholder="name@hit.ac.zw" required>
                        <p v-if="loginForm.emailError" class="mt-1 text-sm text-red-600">{{ loginForm.emailError }}</p>
                    </div>
                    
                    <div class="mb-6">
                        <label class="block mb-2 text-sm font-medium">Password</label>
                        <input type="password" v-model="loginForm.password" class="form-input-dark border border-dark text-base rounded-lg block w-full p-2.5" placeholder="••••••••" required>
                        <p v-if="loginForm.passwordError" class="mt-1 text-sm text-red-600">{{ loginForm.passwordError }}</p>
                    </div>
                    
                    <div class="flex items-start mb-6">
                        <div class="flex items-center h-5">
                            <input id="remember" type="checkbox" v-model="loginForm.remember" class="w-4 h-4 rounded">
                        </div>
                        <label for="remember" class="ml-2 text-sm font-medium">Remember me</label>
                    </div>
                    
                    <button @click="login" class="w-full text-white bg-primary-color hover:bg-opacity-90 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-base px-5 py-2.5 text-center">
                        Sign in
                    </button>
                    
                    <div class="text-sm mt-4 text-center">
                        <span>Don't have an account? </span>
                        <a @click="showPage('register')" href="#" class="hit-primary-text hover:underline">Register</a>
                    </div>
                </div>
            </div>

            <!-- Register Page -->
            <div v-if="currentPage === 'register'" class="container mx-auto px-4 py-8 flex justify-center">
                <div class="w-full max-w-md p-6 auth-form rounded-lg shadow-md border">
                    <h2 class="text-2xl font-bold mb-6 text-center">Register for Campus Connect</h2>
                    <p class="mb-6 text-center">Create your HIT marketplace account</p>
                    
                    <div class="mb-4">
                        <label class="block mb-2 text-sm font-medium">Full Name</label>
                        <input type="text" v-model="registerForm.name" class="form-input-dark border border-dark text-base rounded-lg block w-full p-2.5" placeholder="John Doe" required>
                    </div>
                    
                    <div class="mb-4">
                        <label class="block mb-2 text-sm font-medium">Email Address</label>
                        <input type="email" v-model="registerForm.email" class="form-input-dark border border-dark text-base rounded-lg block w-full p-2.5" placeholder="name@hit.ac.zw" required>
                        <p v-if="registerForm.emailError" class="mt-1 text-sm text-red-600">{{ registerForm.emailError }}</p>
                    </div>
                    
                    <div class="mb-4">
                        <label class="block mb-2 text-sm font-medium">User Type</label>
                        <select v-model="registerForm.userType" class="form-input-dark border border-dark text-base rounded-lg block w-full p-2.5" required>
                            <option value="student">Student</option>
                            <option value="lecturer">Lecturer</option>
                        </select>
                    </div>
                    
                    <div class="mb-4">
                        <label class="block mb-2 text-sm font-medium">Password</label>
                        <input type="password" v-model="registerForm.password" class="form-input-dark border border-dark text-base rounded-lg block w-full p-2.5" placeholder="••••••••" required>
                    </div>
                    
                    <div class="mb-6">
                        <label class="block mb-2 text-sm font-medium">Confirm Password</label>
                        <input type="password" v-model="registerForm.confirmPassword" class="form-input-dark border border-dark text-base rounded-lg block w-full p-2.5" placeholder="••••••••" required>
                        <p v-if="registerForm.passwordError" class="mt-1 text-sm text-red-600">{{ registerForm.passwordError }}</p>
                    </div>
                    
                    <button @click="register" class="w-full text-white bg-primary-color hover:bg-opacity-90 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-base px-5 py-2.5 text-center">
                        Create Account
                    </button>
                    
                    <div class="text-sm mt-4 text-center">
                        <span>Already have an account? </span>
                        <a @click="showPage('login')" href="#" class="hit-primary-text hover:underline">Sign in</a>
                    </div>
                </div>
            </div>

            <!-- New Listing Page -->
            <div v-if="currentPage === 'new-listing'" class="container mx-auto px-4 py-8 flex justify-center">
                <div class="w-full max-w-2xl p-6 auth-form rounded-lg shadow-md border">
                    <h2 class="text-2xl font-bold mb-6">Create New Listing</h2>
                    
                    <div class="mb-4">
                        <label class="block mb-2 text-sm font-medium">Title</label>
                        <input type="text" v-model="newListing.title" class="form-input-dark border border-dark text-base rounded-lg block w-full p-2.5" placeholder="Electronics textbook - 3rd Edition" required>
                    </div>
                    
                    <div class="mb-4">
                        <label class="block mb-2 text-sm font-medium">Category</label>
                        <select v-model="newListing.category" class="form-input-dark border border-dark text-base rounded-lg block w-full p-2.5" required>
                            <option value="Textbooks">Textbooks</option>
                            <option value="Electronics">Electronics</option>
                            <option value="Services">Services</option>
                            <option value="Accommodation">Accommodation</option>
                            <option value="Other">Other</option>
                        </select>
                    </div>
                    
                    <div class="mb-4">
                        <label class="block mb-2 text-sm font-medium">Price (USD)</label>
                        <input type="number" v-model="newListing.price" class="form-input-dark border border-dark text-base rounded-lg block w-full p-2.5" placeholder="30" required min="0" step="0.01">
                    </div>
                    
                    <div class="mb-6">
                        <label class="block mb-2 text-sm font-medium">Description</label>
                        <textarea v-model="newListing.description" rows="4" class="form-input-dark border border-dark text-base rounded-lg block w-full p-2.5" placeholder="Provide details about your item or service..." required></textarea>
                    </div>
                    
                    <div class="mb-6">
                        <label class="block mb-2 text-sm font-medium">Contact Information</label>
                        <input type="text" v-model="newListing.contact" class="form-input-dark border border-dark text-base rounded-lg block w-full p-2.5" placeholder="Phone number or email" required>
                    </div>
                    
                    <div class="flex justify-end space-x-3">
                        <button @click="showPage('home')" class="px-5 py-2.5 text-base font-medium rounded-lg border border-dark">
                            Cancel
                        </button>
                        <button @click="createListing" class="px-5 py-2.5 text-base font-medium rounded-lg text-white bg-primary-color hover:bg-opacity-90">
                            Post Listing
                        </button>
                    </div>
                </div>
            </div>

            <!-- Contact Modal -->
            <div v-if="showContactModal" class="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50">
                <div class="bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full p-6 mx-4">
                    <h3 class="text-xl font-bold mb-4">Contact Seller</h3>
                    <p class="mb-2"><span class="font-semibold">Item:</span> {{ selectedListing.title }}</p>
                    <p class="mb-2"><span class="font-semibold">Seller:</span> {{ selectedListing.sellerName }}</p>
                    <p class="mb-4"><span class="font-semibold">Contact:</span> {{ selectedListing.contact || 'email@hit.ac.zw' }}</p>
                    
                    <div class="mb-4">
                        <label class="block mb-2 text-sm font-medium">Your Message</label>
                        <textarea v-model="contactMessage" rows="3" class="form-input-dark border border-dark text-base rounded-lg block w-full p-2.5" placeholder="I'm interested in your listing..."></textarea>
                    </div>
                    
                    <div class="flex justify-end space-x-3">
                        <button @click="showContactModal = false" class="px-4 py-2 text-sm font-medium rounded-lg border border-dark">
                            Close
                        </button>
                        <button @click="sendMessage" class="px-4 py-2 text-sm font-medium rounded-lg text-white bg-primary-color hover:bg-opacity-90">
                            Send Message
                        </button>
                    </div>
                </div>
            </div>
        </main>

        <!-- Footer -->
        <footer class="hit-primary-bg py-6 text-white">
            <div class="container mx-auto px-4">
                <div class="flex flex-col md:flex-row justify-between items-center">
                    <div class="mb-4 md:mb-0">
                        <h3 class="text-lg font-bold">Campus Connect</h3>
                        <p class="text-sm">Exclusively for Harare Institute of Technology</p>
                    </div>
                    <div class="text-sm text-center md:text-right">
                        <p>&copy; 2025 Campus Connect | HIT Marketplace</p>
                        <p>All rights reserved</p>
                    </div>
                </div>
            </div>
        </footer>
    </div>

    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="script.js"></script>
</body>
</html>